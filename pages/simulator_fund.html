<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ETF・インデックス投資の効率的フロンティア | Life×Money</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <link rel="stylesheet" href="../assets/simulator.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header>
    <div class="container nav">
      <a class="brand" href="/index.html">
        <span style="font-weight:700;font-size:1.2rem;color:var(--accent)">Life×Money</span>
      </a>
      <nav>
        <a class="btn ghost" href="/pages/founder.html">創設者の想い</a>
        <a class="btn ghost" href="/pages/simulator.html">シミュレーション</a>
        <a class="btn ghost" href="/pages/glossary.html">やさしい用語</a>
        <a class="btn ghost" href="/pages/faq.html">FAQ</a>
      </nav>
    </div>
  </header>
  <div class="wrap">
        <section class="callout" style="margin-bottom:2rem;">
      <h2 style="font-size:1.3rem;margin-bottom:.7rem;">金融商品のリターンと利回りって何？</h2>
      <p>
        投資の成績を測るものさしとして「リターン」と「利回り」があります。似ているようで、少し意味が違います。
      </p>
      <div class="callout" style="margin-bottom:1.2em;">
        <h3>リターン（Return）</h3>
        <div class="desc">
          <strong>「いくら儲かったか」という金額そのもの</strong>です。<br>
          例えば、10万円で買った株が11万円で売れたら、リターンは「1万円」です。また、持っている間にもらえる配当金などもリターンに含まれます。
          <ul>
            <li><strong>キャピタルゲイン:</strong> 安く買って高く売った時の差額の利益。</li>
            <li><strong>インカムゲイン:</strong> 株の配当金や預金の利息など、持っているだけで得られる利益。</li>
          </ul>
          リターン = キャピタルゲイン + インカムゲイン
        </div>
      </div>
      <div class="callout" style="margin-bottom:1.2em;">
        <h3>利回り（Yield）</h3>
        <div class="desc">
          <strong>「投資した金額に対して、1年間で何%の利益が出たか」という割合</strong>です。<br>
          リターンが同じ1万円でも、10万円の投資で得たのか、100万円の投資で得たのかで効率が違いますよね。この「効率」を示してくれるのが利回りです。<br>
          <code>利回り(%) = 1年間のリターン ÷ 投資元本 × 100</code>
        </div>
      </div>
    
      <h3 style="font-size:1.2rem;margin-top:1.5rem;margin-bottom:.7rem;">主な金融商品のリターンと利回りの特徴</h3>
      <p>金融商品によって、期待できるリターンやリスクの大きさが異なります。</p>
      <table class="styled-table" style="width:100%; border-collapse: collapse;">
        <thead>
          <tr style="background-color: #f3f4f6;">
            <th style="padding: 8px; border: 1px solid #e5e7eb; text-align: left;">金融商品</th>
            <th style="padding: 8px; border: 1px solid #e5e7eb; text-align: left;">主なリターン</th>
            <th style="padding: 8px; border: 1px solid #e5e7eb; text-align: left;">利回りの目安</th>
            <th style="padding: 8px; border: 1px solid #e5e7eb; text-align: left;">特徴</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 8px; border: 1px solid #e5e7eb;"><strong>預金</strong></td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">利息（インカムゲイン）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">低い（例: 0.01% 〜 0.2%）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">安全性が非常に高いですが、お金はほとんど増えません。</td>
          </tr>
          <tr style="background-color: #f9fafb;">
            <td style="padding: 8px; border: 1px solid #e5e7eb;"><strong>債券</strong></td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">利子（インカムゲイン）<br>売却益（キャピタルゲイン）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">預金よりは高い（例: 1% 〜 4%）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">国や会社にお金を貸す仕組み。満期まで持てば元本が戻ってくるものが多く、比較的安全です。</td>
          </tr>
          <tr>
            <td style="padding: 8px; border: 1px solid #e5e7eb;"><strong>株式</strong></td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">配当金（インカムゲイン）<br>売却益（キャピタルゲイン）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">変動が大きい（例: -20% 〜 +30%）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">会社のオーナーになる権利。会社の成長と共に価値が大きく上がる可能性がある一方、下がるリスクもあります。</td>
          </tr>
          <tr style="background-color: #f9fafb;">
            <td style="padding: 8px; border: 1px solid #e5e7eb;"><strong>投資信託・ETF</strong></td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">分配金（インカムゲイン）<br>基準価額の上昇（キャピタルゲイン）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">投資先による</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">専門家が色々な株や債券にまとめて投資してくれるパッケージ商品。手軽に分散投資ができます。</td>
          </tr>
        </tbody>
      </table>
      <div class="callout tips" style="margin-top:1.2em;">
        <h3>ポイント</h3>
        <ul>
          <li><strong>リターンは金額、利回りは割合（%）。</strong> 投資の効率を見るときは「利回り」が重要！</li>
          <li>一般的に<strong>「ハイリスク・ハイリターン」</strong>、<strong>「ローリスク・ローリターン」</strong>の関係があります。</li>
          <li><strong>「ハイリスク・ハイリターン」</strong>と<strong>「ローリスク・ローリターン」</strong>は本質的に同じことです。</li>
          <li>しかし、ノーリスク・ハイリターンが理想ですよね。もしくはローリスク・ハイリターンはないのだろうか・・・。</li>

          <li>それが、あるんです。数学の力を使えば、そのような都合の良いことも明らかなのです。
            　色々な商品を組み合わせる「分散投資」で、リスクを抑えながらリターンを狙うことができます。</li>
        </ul>
      </div>
    </section>


    <h1>期待リターンとリスク</h1>
    <p class="muted">期待リターン・リスク・シャープレシオ</p>

    <div class="card" style="max-width:1920px; margin:0 auto;">
      <div class="section-title">期待リターン・リスク</div>
      <table style="max-width:100%;margin-bottom:18px;">
        <thead>
          <tr>
            <th>ETF</th>
            <th>代表的な銘柄</th>
            <th>期待リターン（%/年）</th>
            <th>リスク（標準偏差 %/年）</th>
            <th>シャープレシオ</th>
          </tr>
        </thead>
        <tbody id="etf-table">
          <!-- JSでETF行を生成 -->
        </tbody>
      </table>
      
          <!-- JSで相関係数行を生成 -->
        </tbody>
      </table>
      

    </div>
      <div class="card" style="max-width:1920px; margin:0 auto;">
        <p>シャープレシオが高いものほど正義</p>
          これらの金融商品を組み合わせることで効率的フロンティアが見えてきます。

    <div style="margin-top:18px; display:flex; justify-content:center; gap:48px;">
      <a href="/pages/simulator.html" class="btn" style="font-size:18px;">一歩進んだシミュレーション← </a>
      <a href="/pages/simulator_effecient frontier.html" class="btn" style="font-size:18px;">効率的フロンティアとは →</a>
  </div>
  <footer>
    <div class="container">
      <p>© <span id="y"></span> Life×Money — 金融リテラシー×ライフデザイン</p>
    </div>
  </footer>

<script>
const etfs = [
  { name: "米国株", key: "us", ret: 7.0, risk: 15.0, ratio: 25, ticker: "SBI・V・S&P500（投信）/ VOO（ETF）" },
  { name: "先進国株", key: "dev", ret: 6.0, risk: 14.0, ratio: 10, ticker: "eMAXIS Slim 先進国株式（投信）/ VEA（ETF）" },
  { name: "新興国株", key: "em", ret: 8.0, risk: 20.0, ratio: 10, ticker: "eMAXIS Slim 新興国株式（投信）/ VWO（ETF）" },
  { name: "全世界株", key: "vt", ret: 6.5, risk: 13.0, ratio: 10, ticker: "SBI・V・全世界株式（投信）/ VT（ETF）" },
  { name: "日本株", key: "jp", ret: 5.0, risk: 16.0, ratio: 10, ticker: "eMAXIS Slim 国内株式（TOPIX）/ 1306（ETF）" },
  { name: "米国債券", key: "bond", ret: 2.5, risk: 5.0, ratio: 10, ticker: "SBI・V・米国債券（投信）/ AGG（ETF）" },
  { name: "超長期米国債", key: "edv", ret: 3.0, risk: 18.0, ratio: 5, ticker: "EDV（ETF）" },
  { name: "日本国債（短期）", key: "jgb_s", ret: 0.2, risk: 1.0, ratio: 10, ticker: "eMAXIS Slim 国内債券（投信）/ 2510（ETF）" },
  { name: "日本国債（長期）", key: "jgb_l", ret: 0.5, risk: 4.0, ratio: 10, ticker: "eMAXIS Slim 国内債券（投信）/ 2511（ETF）" }
];


const rf = 0.5; // 無リスク利率（シャープレシオ計算用）

function renderETFTable() {
  const tbody = document.getElementById('etf-table');
  tbody.innerHTML = '';
  etfs.forEach((etf, i) => {
    const tr = document.createElement('tr');
    const sharp = (etf.ret - rf) / etf.risk;
    tr.innerHTML = `
      <td>${etf.name}</td>
      <td>${etf.ticker}</td>
      <td>
        <input type="number" min="0" max="20" step="0.1" value="${etf.ret}" style="width:60px;" data-idx="${i}" class="ret-input"> %
      </td>
      <td>
        <input type="number" min="0" max="30" step="0.1" value="${etf.risk}" style="width:60px;" data-idx="${i}" class="risk-input"> %
      </td>
      <td>${sharp.toFixed(2)}</td>
    `;
    tbody.appendChild(tr);
  });
}
function renderCorrTable() {
  const tbody = document.getElementById('corr-table');
  tbody.innerHTML = '';
  etfs.forEach((rowEtf, i) => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${rowEtf.name}</td>` +
      etfs.map((colEtf, j) => {
        const val = corr[rowEtf.key][colEtf.key];
        if (i === j) {
          return `<td style="background:#f3f4f6;">1.00</td>`;
        }
        return `<td><input type="number" min="-1" max="1" step="0.01" value="${val}" style="width:60px;" data-row="${rowEtf.key}" data-col="${colEtf.key}" class="corr-input"></td>`;
      }).join('');
    tbody.appendChild(tr);
  });
}

function calcPortfolio() {
  // 比率合計100%に正規化
  let total = etfs.reduce((s,e)=>s+Number(e.ratio),0);
  if (total === 0) total = 1;
  const w = etfs.map(e=>Number(e.ratio)/total);
  // 期待リターン
  const pret = etfs.reduce((s,e,i)=>s+w[i]*Number(e.ret),0);
  // 分散
  let varp = 0;
  for(let i=0;i<etfs.length;i++){
    for(let j=0;j<etfs.length;j++){
      varp += w[i]*w[j]*Number(etfs[i].risk)*Number(etfs[j].risk)*corr[etfs[i].key][etfs[j].key]/100/100;
    }
  }
  const prisk = Math.sqrt(varp)*100;
  // シャープレシオ
  const sharp = (pret - rf) / prisk;
  return { pret, prisk, sharp };
}

function updateAll() {
  renderETFTable();
  renderCorrTable();
  const kpi = calcPortfolio();
  document.getElementById('portfolio-kpi').innerHTML =
    `<b>期待リターン：</b> ${kpi.pret.toFixed(2)} %/年　<b>リスク：</b> ${kpi.prisk.toFixed(2)} %/年　<b>シャープレシオ：</b> ${kpi.sharp.toFixed(2)}`;


  const points = [];
  for(let x=0;x<=100;x+=5){
    etfs[0].ratio = x;
    etfs[1].ratio = Math.max(0, 100-x-etfs[2].ratio-etfs[3].ratio);
    const k = calcPortfolio();
    points.push({ret:k.pret, risk:k.prisk, sharp:k.sharp});
  }
  // 元に戻す
  etfs[0].ratio = Number(document.querySelector('.ratio-input[data-idx="0"]').value);
  etfs[1].ratio = Number(document.querySelector('.ratio-input[data-idx="1"]').value);

  const ctx = document.getElementById('frontierChart').getContext('2d');
  if(window.frontierChart) window.frontierChart.destroy();
  window.frontierChart = new Chart(ctx, {
    type: 'scatter',
    data: {
      datasets: [{
        label: '効率的フロンティア',
        data: points.map(p=>({x:p.risk, y:p.ret})),
        borderColor: '#2563eb',
        backgroundColor: '#60a5fa',
        showLine: true,
        pointRadius: 4,
        tension: 0.2
      }]
    },
    options: {
      plugins: {
        legend: { display: false }
      },
      scales: {
        x: {
          title: { display:true, text:'リスク（標準偏差 %/年）', font:{size:16, family:"Meiryo, 'Yu Gothic', 'sans-serif'"} },
          min: 0, max: 25
        },
        y: {
          title: { display:true, text:'期待リターン（%/年）', font:{size:16, family:"Meiryo, 'Yu Gothic', 'sans-serif'"} },
          min: 0, max: 12
        }
      }
    }
  });
}

// イベント配線
function attachEvents() {
  document.getElementById('etf-table').addEventListener('input', e=>{
    if(e.target.classList.contains('ret-input')){
      const idx = Number(e.target.dataset.idx);
      etfs[idx].ret = Number(e.target.value);
      updateAll();
    }
    if(e.target.classList.contains('risk-input')){
      const idx = Number(e.target.dataset.idx);
      etfs[idx].risk = Number(e.target.value);
      updateAll();
    }
  });
  document.getElementById('corr-table').addEventListener('input', e=>{
    if(e.target.classList.contains('corr-input')){
      const row = e.target.dataset.row;
      const col = e.target.dataset.col;
      corr[row][col] = Number(e.target.value);
      corr[col][row] = Number(e.target.value); // 対称に
      updateAll();
    }
  });
}

window.addEventListener('DOMContentLoaded', ()=>{
  renderETFTable();
  renderCorrTable();
  updateAll();
  attachEvents();
});
</script>
</body>
</html>
