<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ETF・インデックス投資の効率的フロンティア | Life×Money</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <link rel="stylesheet" href="../assets/simulator.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header>
    <div class="container nav">
      <a class="brand" href="/index.html">
        <span style="font-weight:700;font-size:1.2rem;color:var(--accent)">Life×Money</span>
      </a>
      <nav>
        <a class="btn ghost" href="/pages/founder.html">創設者の想い</a>
        <a class="btn ghost" href="/pages/simulator.html">シミュレーション</a>
        <a class="btn ghost" href="/pages/glossary.html">やさしい用語</a>
        <a class="btn ghost" href="/pages/faq.html">FAQ</a>
      </nav>
    </div>
  </header>
  <div class="wrap">
        <section class="callout" style="margin-bottom:2rem;">
      <h2 style="font-size:1.3rem;margin-bottom:.7rem;">金融商品のリターンと利回りって何？</h2>
      <p class="muted">投資の成績は大きく <b>リターン（%）</b> と <b>利回り（%）</b> で表します。まずは全体像をつかんでから、実例とミニツールで直感をつけましょう。</p>
      <nav class="toc" aria-label="目次">
        <a href="#ret">リターン（%）とは</a>
        <a href="#examples">図と数値例</a>
        <a href="#yield">利回り（%）とは</a>
        <a href="#tools">計算ミニツール</a>
        <a href="#table">代表的な商品</a>
      </nav>
      <div id="ret" class="callout" style="margin-bottom:1.2em;">
        <h3>リターン（Return）</h3>
        <div class="desc">
          <strong>一定期間に投資元本に対してどれだけ増減したかを示す割合（%）</strong>です。値上がり（キャピタル）と配当・利息（インカム）を合わせた<strong>トータルリターン</strong>で表すのが一般的です。<br>
          <code>単期間リターン(%) = (期末時価 + 受取分配 − 期首時価) ÷ 期首時価 × 100</code><br>
          複数年を比較する場合は、年率換算（CAGR：年平均成長率）を使います。
          <code>年率リターン(%) = \[(期末価値 ÷ 期首価値)^(1/年数) − 1\] × 100</code>
          <ul>
            <li><strong>キャピタルリターン:</strong> 価格の上昇・下落による増減（%）。</li>
            <li><strong>インカムリターン:</strong> 配当・利息などの受取分（%）。</li>
          </ul>
          一般に「リターン（%）」と言うと、これらを合算したトータルの増減率を指します（配当再投資を前提とすることが多い）。
        </div>
      </div>

      <!-- 図解・数値例（トータルリターン） -->
      <div id="examples" class="callout" style="margin-bottom:1.2em;">
        <h3>図解と数値例（% で考える）</h3>
        <div class="desc">
          例1）期首100万円、年末価格108万円、配当2万円（再投資）なら、<br>
          <code>単期間リターン = (108万円 + 2万円 − 100万円) ÷ 100万円 = 10%</code>
        </div>
        <!-- SVG図（レスポンシブ） -->
        <svg class="svg-diagram" role="img" aria-label="トータルリターンの図解" viewBox="0 0 820 120" style="width:100%; max-width:780px; height:auto; display:block; margin:.5rem auto;">
          <defs>
            <style>
              .box{ fill:#ffffff; stroke:#cbd5e1; stroke-width:1.5; rx:10; }
              .txt{ font: 14px Meiryo,'Yu Gothic',sans-serif; fill:#0f172a; }
              .arrow{ stroke:#94a3b8; stroke-width:1.5; marker-end:url(#m); }
            </style>
            <marker id="m" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
              <path d="M0,0 L8,3 L0,6 Z" fill="#94a3b8" />
            </marker>
          </defs>
          <rect class="box" x="10" y="20" width="140" height="60"/>
          <text class="txt" x="80" y="55" text-anchor="middle">期首 100</text>

          <line class="arrow" x1="150" y1="50" x2="270" y2="50"/>
          <rect class="box" x="270" y="20" width="160" height="60"/>
          <text class="txt" x="350" y="45" text-anchor="middle">価格 +8%</text>
          <text class="txt" x="350" y="65" text-anchor="middle">（キャピタル）</text>

          <line class="arrow" x1="430" y1="50" x2="540" y2="50"/>
          <rect class="box" x="540" y="20" width="160" height="60"/>
          <text class="txt" x="620" y="45" text-anchor="middle">分配 +2%</text>
          <text class="txt" x="620" y="65" text-anchor="middle">（再投資・インカム）</text>

          <line class="arrow" x1="700" y1="50" x2="800" y2="50"/>
          <text class="txt" x="800" y="55" text-anchor="end">期末 110</text>
        </svg>
        <div class="table-scroll">
        <table class="styled-table" style="width:100%; border-collapse: collapse; margin-top:.6rem; min-width:640px;">
          <thead>
            <tr style="background:#f3f4f6;">
              <th style="padding:8px; border:1px solid #e5e7eb; text-align:left;">年</th>
              <th style="padding:8px; border:1px solid #e5e7eb; text-align:right;">期首時価</th>
              <th style="padding:8px; border:1px solid #e5e7eb; text-align:right;">分配金</th>
              <th style="padding:8px; border:1px solid #e5e7eb; text-align:right;">期末時価</th>
              <th style="padding:8px; border:1px solid #e5e7eb; text-align:right;">単期間リターン</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding:8px; border:1px solid #e5e7eb;">1年目</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">100万円</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">2万円</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">108万円</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">10%</td>
            </tr>
            <tr>
              <td style="padding:8px; border:1px solid #e5e7eb;">2年目（参考）</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">108万円</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">2.16万円</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">116.64万円</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">10%</td>
            </tr>
          </tbody>
        </table>
        </div>
        <div class="desc" style="margin-top:.6rem;">
          例2）3年間で100万円→120万円になった場合の年率リターン（CAGR）は、<br>
          <code>年率 = [(120 ÷ 100)^(1/3) − 1] × 100 ≈ 6.27%</code><br>
          単純平均（各年の%を足して割る）ではなく、<strong>年率換算（幾何平均）</strong>で比較するのが定石です。
        </div>
      </div>
      <div id="yield" class="callout" style="margin-bottom:1.2em;">
        <h3>利回り（Yield）</h3>
        <div class="desc">
          <strong>「投資した金額に対して、1年間で何%の利益が出たか」という割合</strong>です。<br>
          リターンが同じ1万円でも、10万円の投資で得たのか、100万円の投資で得たのかで効率が違いますよね。この「効率」を示してくれるのが利回りです。<br>
          <code>利回り(%) = 1年間のリターン ÷ 投資元本 × 100</code>
        </div>
        <div class="desc" style="margin-top:.5rem;">
          例）100万円を年3%で運用 ⇒ <strong>利回り3%</strong>、受取インカムは<strong>年3万円</strong>。<br>
          分配を再投資すれば、翌年の元本は103万円になり、利回り3%なら<strong>年3.09万円</strong>（複利）。
        </div>
        <div class="table-scroll">
        <table class="styled-table" style="width:100%; border-collapse: collapse; margin-top:.6rem; min-width:640px;">
          <thead>
            <tr style="background:#f3f4f6;">
              <th style="padding:8px; border:1px solid #e5e7eb; text-align:left;">年</th>
              <th style="padding:8px; border:1px solid #e5e7eb; text-align:right;">年初元本</th>
              <th style="padding:8px; border:1px solid #e5e7eb; text-align:right;">年利回り</th>
              <th style="padding:8px; border:1px solid #e5e7eb; text-align:right;">年間インカム</th>
              <th style="padding:8px; border:1px solid #e5e7eb; text-align:right;">年末元本（再投資後）</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding:8px; border:1px solid #e5e7eb;">1年目</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">100万円</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">3%</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">3.00万円</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">103万円</td>
            </tr>
            <tr>
              <td style="padding:8px; border:1px solid #e5e7eb;">2年目</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">103万円</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">3%</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">3.09万円</td>
              <td style="padding:8px; border:1px solid #e5e7eb; text-align:right;">106.09万円</td>
            </tr>
          </tbody>
        </table>
        </div>
        <p class="muted" style="margin:.4rem 0 0;">※ 税金・手数料は簡略化し、説明のため端数は四捨五入しています。</p>
      </div>

      <!-- リスク×リターンの概念図（画像） -->
      <!-- 画像ファイルは /assets/risk-return.png に配置してください -->
      <figure class="figure">
        <img src="../assets/risk-return.png" alt="リスク（横軸）とリターン（縦軸）の一般的な関係の概念図">
        <figcaption>リスクとリターンの一般的な関係（概念図）</figcaption>
      </figure>

      <!-- ミニ計算ツール -->
      <section id="tools" class="card" style="margin:1rem 0;">
        <div class="section-title">ミニ計算ツール</div>
        <div class="calc-card" aria-labelledby="cagr-title">
          <h4 id="cagr-title">年率リターン（CAGR）</h4>
          <div class="calc-row">
            <label for="cagr-start">期首価値</label>
            <input id="cagr-start" type="number" inputmode="decimal" value="100" step="0.01" aria-describedby="cagr-unit1"><span id="cagr-unit1" class="unit">万円</span>
          </div>
          <div class="calc-row">
            <label for="cagr-end">期末価値</label>
            <input id="cagr-end" type="number" inputmode="decimal" value="120" step="0.01" aria-describedby="cagr-unit2"><span id="cagr-unit2" class="unit">万円</span>
          </div>
          <div class="calc-row">
            <label for="cagr-years">年数</label>
            <input id="cagr-years" type="number" inputmode="numeric" value="3" min="1" step="1"><span class="unit">年</span>
          </div>
          <div class="calc-result" id="cagr-result" aria-live="polite">年率 ≈ 6.27%</div>
          <div class="calc-note">式：年率 = [(期末 ÷ 期首)^(1/年数) − 1] × 100</div>
        </div>
        <div class="calc-card" aria-labelledby="yield-title">
          <h4 id="yield-title">利回り（年間インカム）</h4>
          <div class="calc-row">
            <label for="y-principal">元本</label>
            <input id="y-principal" type="number" inputmode="decimal" value="100" step="0.01" aria-describedby="y-unit1"><span id="y-unit1" class="unit">万円</span>
          </div>
          <div class="calc-row">
            <label for="y-rate">利回り</label>
            <input id="y-rate" type="number" inputmode="decimal" value="3" step="0.1"><span class="unit">% / 年</span>
          </div>
          <div class="calc-result" id="y-result" aria-live="polite">年間インカム: 3.00万円 / 年末元本(再投資): 103.00万円</div>
          <div class="calc-note">※ 税・手数料は考慮していません。再投資すると元本が増え、翌年のインカムも増えます（複利）。</div>
        </div>
      </section>
    
      <h3 id="table" style="font-size:1.2rem;margin-top:1.5rem;margin-bottom:.7rem;">主な金融商品のリターンと利回りの特徴</h3>
      <p>金融商品によって、期待できるリターンやリスクの大きさが異なります。</p>
      <table class="styled-table" style="width:100%; border-collapse: collapse;">
        <thead>
          <tr style="background-color: #f3f4f6;">
            <th style="padding: 8px; border: 1px solid #e5e7eb; text-align: left;">金融商品</th>
            <th style="padding: 8px; border: 1px solid #e5e7eb; text-align: left;">主なリターン</th>
            <th style="padding: 8px; border: 1px solid #e5e7eb; text-align: left;">利回りの目安</th>
            <th style="padding: 8px; border: 1px solid #e5e7eb; text-align: left;">特徴</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 8px; border: 1px solid #e5e7eb;"><strong>預金</strong></td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">利息（インカムゲイン）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">低い（例: 0.01% 〜 0.2%）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">安全性が非常に高いですが、お金はほとんど増えません。</td>
          </tr>
          <tr style="background-color: #f9fafb;">
            <td style="padding: 8px; border: 1px solid #e5e7eb;"><strong>債券</strong></td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">利子（インカムゲイン）<br>売却益（キャピタルゲイン）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">預金よりは高い（例: 1% 〜 4%）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">国や会社にお金を貸す仕組み。満期まで持てば元本が戻ってくるものが多く、比較的安全です。</td>
          </tr>
          <tr>
            <td style="padding: 8px; border: 1px solid #e5e7eb;"><strong>株式</strong></td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">配当金（インカムゲイン）<br>売却益（キャピタルゲイン）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">変動が大きい（例: -20% 〜 +30%）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">会社のオーナーになる権利。会社の成長と共に価値が大きく上がる可能性がある一方、下がるリスクもあります。</td>
          </tr>
          <tr style="background-color: #f9fafb;">
            <td style="padding: 8px; border: 1px solid #e5e7eb;"><strong>投資信託・ETF</strong></td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">分配金（インカムゲイン）<br>基準価額の上昇（キャピタルゲイン）</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">投資先による</td>
            <td style="padding: 8px; border: 1px solid #e5e7eb;">専門家が色々な株や債券にまとめて投資してくれるパッケージ商品。手軽に分散投資ができます。</td>
          </tr>
        </tbody>
      </table>
      <div class="callout tips" style="margin-top:1.2em;">
        <h3>ポイント</h3>
        <ul>
          <li><strong>リターンは金額、利回りは割合（%）。</strong> 投資の効率を見るときは「利回り」が重要！</li>
          <li>一般的に<strong>「ハイリスク・ハイリターン」</strong>、<strong>「ローリスク・ローリターン」</strong>の関係があります。</li>
          <li><strong>「ハイリスク・ハイリターン」</strong>と<strong>「ローリスク・ローリターン」</strong>は本質的に同じことです。</li>
          <li>しかし、ノーリスク・ハイリターンが理想ですよね。もしくはローリスク・ハイリターンはないのだろうか・・・。</li>

          <li>それが、あるんです。数学の力を使えば、そのような都合の良いことも明らかなのです。
            　色々な商品を組み合わせる「分散投資」で、リスクを抑えながらリターンを狙うことができます。</li>
        </ul>
      </div>
    </section>

      

    </div>
      <div class="card" style="max-width:1920px; margin:0 auto;">
          これらの金融商品を組み合わせることで効率的フロンティアが見えてきます。

    <div style="margin-top:18px; display:flex; justify-content:center; gap:48px;">
      <a href="/pages/simulator.html" class="btn" style="font-size:18px;">一歩進んだシミュレーション← </a>
      <a href="/pages/simulator_effecient frontier.html" class="btn" style="font-size:18px;">効率的フロンティアとは →</a>
  </div>
  <footer>
    <div class="container">
      <p>© <span id="y"></span> Life×Money — 金融リテラシー×ライフデザイン</p>
    </div>
  </footer>

<script>
// ===== Mini calculators =====
(function(){
  const $ = (q)=>document.querySelector(q);
  const fmt = (n, digits=2)=> Number(n).toLocaleString('ja-JP', { minimumFractionDigits: digits, maximumFractionDigits: digits });

  function updateCAGR(){
    const s = Math.max(0.000001, Number($('#cagr-start').value||0));
    const e = Math.max(0, Number($('#cagr-end').value||0));
    const y = Math.max(1, Math.round(Number($('#cagr-years').value||1)));
    $('#cagr-years').value = y;
    const r = Math.pow(e/s, 1/y) - 1;
    $('#cagr-result').textContent = `年率 ≈ ${fmt(r*100, 2)}%`;
  }
  function updateYield(){
    const p = Math.max(0, Number($('#y-principal').value||0));
    const r = Number($('#y-rate').value||0)/100;
    const inc = p * r;
    const end = p * (1 + r);
    $('#y-result').textContent = `年間インカム: ${fmt(inc,2)}万円 / 年末元本(再投資): ${fmt(end,2)}万円`;
  }
  ['#cagr-start','#cagr-end','#cagr-years'].forEach(sel=>{
    const el = $(sel); if (el) ['input','change'].forEach(ev=> el.addEventListener(ev, updateCAGR));
  });
  ['#y-principal','#y-rate'].forEach(sel=>{
    const el = $(sel); if (el) ['input','change'].forEach(ev=> el.addEventListener(ev, updateYield));
  });
  updateCAGR();
  updateYield();
})();
const etfs = [
  { name: "米国株", key: "us", ret: 7.0, risk: 15.0, ratio: 25, ticker: "SBI・V・S&P500（投信）/ VOO（ETF）" },
  { name: "先進国株", key: "dev", ret: 6.0, risk: 14.0, ratio: 10, ticker: "eMAXIS Slim 先進国株式（投信）/ VEA（ETF）" },
  { name: "新興国株", key: "em", ret: 8.0, risk: 20.0, ratio: 10, ticker: "eMAXIS Slim 新興国株式（投信）/ VWO（ETF）" },
  { name: "全世界株", key: "vt", ret: 6.5, risk: 13.0, ratio: 10, ticker: "SBI・V・全世界株式（投信）/ VT（ETF）" },
  { name: "日本株", key: "jp", ret: 5.0, risk: 16.0, ratio: 10, ticker: "eMAXIS Slim 国内株式（TOPIX）/ 1306（ETF）" },
  { name: "米国債券", key: "bond", ret: 2.5, risk: 5.0, ratio: 10, ticker: "SBI・V・米国債券（投信）/ AGG（ETF）" },
  { name: "超長期米国債", key: "edv", ret: 3.0, risk: 18.0, ratio: 5, ticker: "EDV（ETF）" },
  { name: "日本国債（短期）", key: "jgb_s", ret: 0.2, risk: 1.0, ratio: 10, ticker: "eMAXIS Slim 国内債券（投信）/ 2510（ETF）" },
  { name: "日本国債（長期）", key: "jgb_l", ret: 0.5, risk: 4.0, ratio: 10, ticker: "eMAXIS Slim 国内債券（投信）/ 2511（ETF）" }
];


const rf = 0.5; // 無リスク利率（シャープレシオ計算用）

function renderETFTable() {
  const tbody = document.getElementById('etf-table');
  tbody.innerHTML = '';
  etfs.forEach((etf, i) => {
    const tr = document.createElement('tr');
    const sharp = (etf.ret - rf) / etf.risk;
    tr.innerHTML = `
      <td>${etf.name}</td>
      <td>${etf.ticker}</td>
      <td>
        <input type="number" min="0" max="20" step="0.1" value="${etf.ret}" style="width:60px;" data-idx="${i}" class="ret-input"> %
      </td>
      <td>
        <input type="number" min="0" max="30" step="0.1" value="${etf.risk}" style="width:60px;" data-idx="${i}" class="risk-input"> %
      </td>
      <td>${sharp.toFixed(2)}</td>
    `;
    tbody.appendChild(tr);
  });
}
function renderCorrTable() {
  const tbody = document.getElementById('corr-table');
  tbody.innerHTML = '';
  etfs.forEach((rowEtf, i) => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${rowEtf.name}</td>` +
      etfs.map((colEtf, j) => {
        const val = corr[rowEtf.key][colEtf.key];
        if (i === j) {
          return `<td style="background:#f3f4f6;">1.00</td>`;
        }
        return `<td><input type="number" min="-1" max="1" step="0.01" value="${val}" style="width:60px;" data-row="${rowEtf.key}" data-col="${colEtf.key}" class="corr-input"></td>`;
      }).join('');
    tbody.appendChild(tr);
  });
}

function calcPortfolio() {
  // 比率合計100%に正規化
  let total = etfs.reduce((s,e)=>s+Number(e.ratio),0);
  if (total === 0) total = 1;
  const w = etfs.map(e=>Number(e.ratio)/total);
  // 期待リターン
  const pret = etfs.reduce((s,e,i)=>s+w[i]*Number(e.ret),0);
  // 分散
  let varp = 0;
  for(let i=0;i<etfs.length;i++){
    for(let j=0;j<etfs.length;j++){
      varp += w[i]*w[j]*Number(etfs[i].risk)*Number(etfs[j].risk)*corr[etfs[i].key][etfs[j].key]/100/100;
    }
  }
  const prisk = Math.sqrt(varp)*100;
  // シャープレシオ
  const sharp = (pret - rf) / prisk;
  return { pret, prisk, sharp };
}

function updateAll() {
  renderETFTable();
  renderCorrTable();
  const kpi = calcPortfolio();
  document.getElementById('portfolio-kpi').innerHTML =
    `<b>期待リターン：</b> ${kpi.pret.toFixed(2)} %/年　<b>リスク：</b> ${kpi.prisk.toFixed(2)} %/年　<b>シャープレシオ：</b> ${kpi.sharp.toFixed(2)}`;


  const points = [];
  for(let x=0;x<=100;x+=5){
    etfs[0].ratio = x;
    etfs[1].ratio = Math.max(0, 100-x-etfs[2].ratio-etfs[3].ratio);
    const k = calcPortfolio();
    points.push({ret:k.pret, risk:k.prisk, sharp:k.sharp});
  }
  // 元に戻す
  etfs[0].ratio = Number(document.querySelector('.ratio-input[data-idx="0"]').value);
  etfs[1].ratio = Number(document.querySelector('.ratio-input[data-idx="1"]').value);

  const ctx = document.getElementById('frontierChart').getContext('2d');
  if(window.frontierChart) window.frontierChart.destroy();
  window.frontierChart = new Chart(ctx, {
    type: 'scatter',
    data: {
      datasets: [{
        label: '効率的フロンティア',
        data: points.map(p=>({x:p.risk, y:p.ret})),
        borderColor: '#2563eb',
        backgroundColor: '#60a5fa',
        showLine: true,
        pointRadius: 4,
        tension: 0.2
      }]
    },
    options: {
      plugins: {
        legend: { display: false }
      },
      scales: {
        x: {
          title: { display:true, text:'リスク（標準偏差 %/年）', font:{size:16, family:"Meiryo, 'Yu Gothic', 'sans-serif'"} },
          min: 0, max: 25
        },
        y: {
          title: { display:true, text:'期待リターン（%/年）', font:{size:16, family:"Meiryo, 'Yu Gothic', 'sans-serif'"} },
          min: 0, max: 12
        }
      }
    }
  });
}

// イベント配線
function attachEvents() {
  document.getElementById('etf-table').addEventListener('input', e=>{
    if(e.target.classList.contains('ret-input')){
      const idx = Number(e.target.dataset.idx);
      etfs[idx].ret = Number(e.target.value);
      updateAll();
    }
    if(e.target.classList.contains('risk-input')){
      const idx = Number(e.target.dataset.idx);
      etfs[idx].risk = Number(e.target.value);
      updateAll();
    }
  });
  document.getElementById('corr-table').addEventListener('input', e=>{
    if(e.target.classList.contains('corr-input')){
      const row = e.target.dataset.row;
      const col = e.target.dataset.col;
      corr[row][col] = Number(e.target.value);
      corr[col][row] = Number(e.target.value); // 対称に
      updateAll();
    }
  });
}

window.addEventListener('DOMContentLoaded', ()=>{
  renderETFTable();
  renderCorrTable();
  updateAll();
  attachEvents();
});
</script>
</body>
</html>
